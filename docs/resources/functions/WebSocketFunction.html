<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>WebSocket Function · Nimbus</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="&lt;p&gt;WebSocket functions allow you to build up a WebSocket API for realtime communication with clients. You can only have one WebSocket API in a nimbus project (i.e. only one endpoint).&lt;/p&gt;
"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="WebSocket Function · Nimbus"/><meta property="og:type" content="website"/><meta property="og:url" content="https://nimbusframework.com/"/><meta property="og:description" content="&lt;p&gt;WebSocket functions allow you to build up a WebSocket API for realtime communication with clients. You can only have one WebSocket API in a nimbus project (i.e. only one endpoint).&lt;/p&gt;
"/><meta property="og:image" content="https://nimbusframework.com/img/docusaurus.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://nimbusframework.com/img/docusaurus.png"/><link rel="shortcut icon" href="/img/favicon.png"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/nimbus.svg" alt="Nimbus"/><h2 class="headerTitleWithLogo">Nimbus</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/docs/Introduction" target="_self">Docs</a></li><li class=""><a href="/docs/gettingstarted" target="_self">Getting Started</a></li><li class=""><a href="/help" target="_self">Help</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>Deploying Resources</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Documentation</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/Introduction">Introduction</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Deploying Resources</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/resources/FileStorageBucket">File Storage Bucket</a></li><li class="navListItem"><a class="navItem" href="/docs/resources/DocumentStore">Document Store</a></li><li class="navListItem"><a class="navItem" href="/docs/resources/KeyValueStore">Key-Value Store</a></li><li class="navListItem"><a class="navItem" href="/docs/resources/RelationalDatabase">Relational Database</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Functions</h4><ul><li class="navListItem"><a class="navItem" href="/docs/resources/functions/HttpFunction">HTTP Function</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/resources/functions/WebSocketFunction">WebSocket Function</a></li><li class="navListItem"><a class="navItem" href="/docs/resources/functions/DocumentStoreFunction">Document Store Function</a></li><li class="navListItem"><a class="navItem" href="/docs/resources/functions/KeyValueStoreFunction">Key-Value Store Function</a></li><li class="navListItem"><a class="navItem" href="/docs/resources/functions/NotificationFunction">Notification Function</a></li><li class="navListItem"><a class="navItem" href="/docs/resources/functions/QueueFunction">Queue Function</a></li><li class="navListItem"><a class="navItem" href="/docs/resources/functions/BasicFunction">Basic Function</a></li><li class="navListItem"><a class="navItem" href="/docs/resources/functions/FileStorageBucketFunction">File Storage Function</a></li><li class="navListItem"><a class="navItem" href="/docs/resources/functions/AfterDeployment">After Deployment Function</a></li><li class="navListItem"><a class="navItem" href="/docs/resources/functions/EnvironmentVariables">Environment Variables</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Clients</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/clients/DocumentStoreClient">Document Store Client</a></li><li class="navListItem"><a class="navItem" href="/docs/clients/KeyValueStoreClient">Key-Value Store Client</a></li><li class="navListItem"><a class="navItem" href="/docs/clients/FileStorageClient">File Storage Client</a></li><li class="navListItem"><a class="navItem" href="/docs/clients/WebSocketServerlessFunctionClient">WebSocket Management Client</a></li><li class="navListItem"><a class="navItem" href="/docs/clients/BasicServerlessFunctionClient">Basic Serverless Function Client</a></li><li class="navListItem"><a class="navItem" href="/docs/clients/NotificationClient">Notification Topic Client</a></li><li class="navListItem"><a class="navItem" href="/docs/clients/QueueClient">Queue Client</a></li><li class="navListItem"><a class="navItem" href="/docs/clients/DatabaseClient">Relational Database Client</a></li><li class="navListItem"><a class="navItem" href="/docs/clients/EnvironmentVariableClient">Environment Variable Client</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Local Deployment</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/localdeployment/UnitTests">Unit Testing</a></li><li class="navListItem"><a class="navItem" href="/docs/localdeployment/LocalServer">Local Server</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              const headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                if (event.target.tagName === 'A') {
                  document.body.classList.remove('tocActive');
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle">WebSocket Function</h1></header><article><div><span><p>WebSocket functions allow you to build up a WebSocket API for realtime communication with clients. You can only have one WebSocket API in a nimbus project (i.e. only one endpoint).</p>
<h2><a class="anchor" aria-hidden="true" id="basic-usage"></a><a href="#basic-usage" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Basic Usage</h2>
<p>Using the <code>WebSocketServerlessFunction</code> annotation a topic where the function will be triggered is specified. There are three important topics, these are:</p>
<ul>
<li><code>$default</code> - Used when the topic selection expression produces a value that does not match any of the other route keys in your API routes. This can be used, for example, to implement a generic error handling mechanism.</li>
<li><code>$connect</code> - The associated route is used when a client first connects to your WebSocket API.</li>
<li><code>$disconnect</code> - The associated route is used when a client disconnects from your API. This call is made on a best-effort basis.</li>
</ul>
<p>The route selection is done via the <code>request.body.topic</code> expression. This means to select what topic is triggered the message send from the client must contain a field called <code>&quot;topic&quot;</code> where its value is the topic. For example to trigger a function that is listening to the newUser topic a message like this would have to be sent:</p>
<pre><code class="hljs css language-json">{
  <span class="hljs-attr">"topic"</span>: <span class="hljs-string">"newUser"</span>,
  <span class="hljs-attr">"username"</span>: <span class="hljs-string">"user"</span>,
  <span class="hljs-attr">"password"</span>: <span class="hljs-string">"1234"</span>
}
</code></pre>
<p>A corresponding backend function for this could look like:</p>
<pre><code class="hljs css language-java"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">WebSocketHandlers</span> </span>{
    
    <span class="hljs-meta">@WebSocketServerlessFunction</span>(topic=<span class="hljs-string">"newUser"</span>)
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">newUser</span><span class="hljs-params">(NewUser newUser, WebSocketEvent event)</span> </span>{
        String connectionId = event.getRequestContext().getConnectionId();
        System.out.println(<span class="hljs-string">"ConnectionId "</span> + connectionId + <span class="hljs-string">" registered as new user: "</span> + newUser);
    }
    
    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">NewUser</span> </span>{
        <span class="hljs-keyword">public</span> String username;
        <span class="hljs-keyword">public</span> String password;
    }
}
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="method-details"></a><a href="#method-details" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Method Details</h2>
<h3><a class="anchor" aria-hidden="true" id="parameters"></a><a href="#parameters" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Parameters</h3>
<p>A WebSocket serverless function method can have at most two parameters. One of these is a <code>WebSocketEvent</code> type, which contains the header and query parameters, as well as the connection id. The second method parameter available is a custom user type which will be read and deserialized from the JSON body of the request. This is done using the jackson library, so any customisation you want can be done using jackson annotations in the target class. An example with both parameters is shown above.</p>
<p>The order of the parameters supplied to the method does not matter, and one or both can be left out.</p>
<h3><a class="anchor" aria-hidden="true" id="return-type"></a><a href="#return-type" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Return type</h3>
<p>The return type is unused in the cloud, instead to send a message back to the client you should use the <a href="/docs/clients/WebSocketServerlessFunctionClient">ServerlessFunctionWebSocketClient</a>. This class allows you to send messages to a ConnectionId. It is important to note that messages cannot be sent to a client until after the <code>$connect</code> function has returned.</p>
<h4><a class="anchor" aria-hidden="true" id="connection-method-details"></a><a href="#connection-method-details" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Connection Method Details</h4>
<p>To accept a client connection the function must return successfully (i.e. no exceptions). If you want to refuse a client connection this function must throw an exception (this is caught by nimbus and translated to a refused connection). You also cannot sent messages to a client until this method has returned successfully.</p>
<h4><a class="anchor" aria-hidden="true" id="example-webchat-server"></a><a href="#example-webchat-server" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example WebChat Server</h4>
<p>Here is an example WebChat server implemented using nimbus. It is very basic, allowing users to send messages to each other.</p>
<pre><code class="hljs css language-java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">WebSocketApi</span> </span>{

    <span class="hljs-keyword">private</span> ServerlessFunctionWebSocketClient webSocketClient = ClientBuilder.getServerlessFunctionWebSocketClient();
    <span class="hljs-keyword">private</span> DocumentStoreClient&lt;UserDetail&gt; userDetails = ClientBuilder.getDocumentStoreClient(UserDetail.class);
    <span class="hljs-keyword">private</span> KeyValueStoreClient&lt;String, ConnectionDetail&gt; connectionDetails = ClientBuilder.getKeyValueStoreClient(String.class, ConnectionDetail.class);

    <span class="hljs-meta">@WebSocketServerlessFunction</span>(topic = <span class="hljs-string">"$connect"</span>)
    <span class="hljs-meta">@UsesDocumentStore</span>(dataModel = UserDetail.class)
    <span class="hljs-meta">@UsesKeyValueStore</span>(dataModel = ConnectionDetail.class)
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onConnect</span><span class="hljs-params">(WebSocketEvent event)</span> <span class="hljs-keyword">throws</span> Exception </span>{
        String connectionId = event.getRequestContext().getConnectionId();
        String username = event.getQueryStringParameters().get(<span class="hljs-string">"user"</span>);
        UserDetail validUser = userDetails.get(username);
        <span class="hljs-keyword">if</span> (validUser != <span class="hljs-keyword">null</span>) {
            ConnectionDetail connectionDetail = <span class="hljs-keyword">new</span> ConnectionDetail(username);
            System.out.println(<span class="hljs-string">"Adding "</span> + connectionDetail.getUsername() + <span class="hljs-string">" with connection "</span> + connectionId);
            connectionDetails.put(connectionId, connectionDetail);
            <span class="hljs-keyword">if</span> (validUser.getCurrentWebsocket() != <span class="hljs-keyword">null</span>) {
                connectionDetails.delete(validUser.getCurrentWebsocket());
            }
            validUser.setCurrentWebsocket(connectionId);
            userDetails.put(validUser);
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> Exception(<span class="hljs-string">"Not a valid user"</span>);
        }
    }

    <span class="hljs-meta">@WebSocketServerlessFunction</span>(topic = <span class="hljs-string">"$disconnect"</span>)
    <span class="hljs-meta">@UsesDocumentStore</span>(dataModel = UserDetail.class)
    <span class="hljs-meta">@UsesKeyValueStore</span>(dataModel = ConnectionDetail.class)
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onDisconnect</span><span class="hljs-params">(WebSocketEvent event)</span> </span>{
        String connectionId = event.getRequestContext().getConnectionId();
        ConnectionDetail disconnectedUser = connectionDetails.get(connectionId);
        <span class="hljs-keyword">if</span> (disconnectedUser != <span class="hljs-keyword">null</span>) {
            UserDetail validUser = userDetails.get(disconnectedUser.getUsername());
            <span class="hljs-keyword">if</span> (validUser != <span class="hljs-keyword">null</span>) {
                validUser.setCurrentWebsocket(<span class="hljs-keyword">null</span>);
                userDetails.put(validUser);
            }
        }
        connectionDetails.delete(event.getRequestContext().getConnectionId());
    }

    <span class="hljs-meta">@WebSocketServerlessFunction</span>(topic = <span class="hljs-string">"sendMessage"</span>)
    <span class="hljs-meta">@UsesServerlessFunctionWebSocketClient</span>
    <span class="hljs-meta">@UsesDocumentStore</span>(dataModel = UserDetail.class)
    <span class="hljs-meta">@UsesKeyValueStore</span>(dataModel = ConnectionDetail.class)
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onMessage</span><span class="hljs-params">(WebSocketMessage message, WebSocketEvent event)</span> </span>{
        UserDetail userDetail = userDetails.get(message.getRecipient());
        ConnectionDetail connectionDetail = connectionDetails.get(event.getRequestContext().getConnectionId());
        <span class="hljs-keyword">if</span> (userDetail != <span class="hljs-keyword">null</span> &amp;&amp; connectionDetail != <span class="hljs-keyword">null</span>) {
            System.out.println();
            webSocketClient.sendToConnectionConvertToJson(userDetail.getCurrentWebsocket(),
                    <span class="hljs-keyword">new</span> Message(message.getMessage(), connectionDetail.getUsername()));
        }
    }

    <span class="hljs-meta">@AfterDeployment</span>
    <span class="hljs-meta">@UsesDocumentStore</span>(dataModel = UserDetail.class)
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setupBasicUsers</span><span class="hljs-params">()</span> </span>{
        UserDetail thomas = <span class="hljs-keyword">new</span> UserDetail(<span class="hljs-string">"thomas"</span>, <span class="hljs-keyword">null</span>);
        UserDetail bob = <span class="hljs-keyword">new</span> UserDetail(<span class="hljs-string">"bob"</span>, <span class="hljs-keyword">null</span>);

        userDetails.put(thomas);
        userDetails.put(bob);
    }
}
</code></pre>
<p>It is recommended to keep track of connection ids that one of the stores are used.</p>
<h2><a class="anchor" aria-hidden="true" id="deployment-information"></a><a href="#deployment-information" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Deployment Information</h2>
<p>Many of these methods can be written to build up a WebSocket api. Once it has been deployed the base URL will be reported.</p>
<p>Any logging lines or print statements will appear in the cloud providers log service (e.g. AWS CloudWatch).</p>
<h2><a class="anchor" aria-hidden="true" id="annotation-specification"></a><a href="#annotation-specification" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Annotation Specification</h2>
<h3><a class="anchor" aria-hidden="true" id="websocketserverlessfunction"></a><a href="#websocketserverlessfunction" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>@WebSocketServerlessFunction</h3>
<h4><a class="anchor" aria-hidden="true" id="required-parameters"></a><a href="#required-parameters" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Required parameters</h4>
<ul>
<li><code>topic</code> - The topic that will trigger the function</li>
</ul>
<h4><a class="anchor" aria-hidden="true" id="optional-parameters"></a><a href="#optional-parameters" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Optional Parameters</h4>
<ul>
<li><code>timeout</code> - How long the function is allowed to run for before timing out, in seconds. Defaults to 10.</li>
<li><code>memory</code> - The amount of memory the function runs with, in MB. Defaults to 1024.</li>
<li><code>stages</code> - The stages that the function is deployed to.</li>
</ul>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/resources/functions/HttpFunction"><span class="arrow-prev">← </span><span>HTTP Function</span></a><a class="docs-next button" href="/docs/resources/functions/DocumentStoreFunction"><span>Document Store Function</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#basic-usage">Basic Usage</a></li><li><a href="#method-details">Method Details</a><ul class="toc-headings"><li><a href="#parameters">Parameters</a></li><li><a href="#return-type">Return type</a></li></ul></li><li><a href="#deployment-information">Deployment Information</a></li><li><a href="#annotation-specification">Annotation Specification</a><ul class="toc-headings"><li><a href="#websocketserverlessfunction">@WebSocketServerlessFunction</a></li></ul></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/nimbus.svg" alt="Nimbus" width="66" height="58"/></a><div><h5>Docs</h5><a href="/docs/gettingstarted.html">Getting Started</a><a href="/docs/Introduction.html">Documentation</a></div><div></div><div><h5>More</h5><a href="https://github.com/thomasjallerton/nimbus-core">GitHub</a><a class="github-button" href="https://github.com/thomasjallerton/nimbus-core" data-icon="octicon-star" data-show-count="false" aria-label="Star this project on GitHub">Star</a></div></section><section class="copyright">Copyright © 2019 Thomas Allerton</section></footer></div></body></html>